# Green Moment - æ™ºæ…§ç¢³è¶³è·¡è¿½è¹¤å¹³å°

![Green Moment Logo](assets/leaf_plug_single.png)

## å°ˆæ¡ˆç°¡ä»‹

Green Moment æ˜¯ä¸€æ¬¾å‰µæ–°çš„è¡Œå‹•æ‡‰ç”¨ç¨‹å¼ï¼Œå”åŠ©å°ç£å®¶åº­é€éå³æ™‚ç›£æ§å°é›»é›»ç¶²çš„ç¢³æ’æ”¾å¼·åº¦ä¾†æ¸›å°‘ç¢³è¶³è·¡ã€‚é€éå°‡é«˜è€—èƒ½æ´»å‹•è½‰ç§»åˆ°ä½ç¢³æ™‚æ®µï¼Œä½¿ç”¨è€…å¯ä»¥åœ¨ç¶­æŒç”Ÿæ´»å“è³ªçš„åŒæ™‚ç‚ºç’°ä¿ç›¡ä¸€ä»½å¿ƒåŠ›ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### ğŸŒ± å³æ™‚ç¢³æ’è¿½è¹¤
- å³æ™‚ç›£æ§å°ç£é›»ç¶²ç¢³æ’æ”¾å¼·åº¦
- æŸ¥çœ‹æœªä¾† 24 å°æ™‚é æ¸¬ï¼Œè¦åŠƒæ‚¨çš„æ´»å‹•
- æ­·å²æ•¸æ“šåˆ†æèˆ‡è¶¨å‹¢åœ–è¡¨

### ğŸ“± æ™ºæ…§å®¶é›»æ’ç¨‹
- è¨˜éŒ„å®¶ç”¨é›»å™¨ä½¿ç”¨æƒ…æ³
- ç²å¾—æœ€ä½³ä½¿ç”¨æ™‚æ®µå»ºè­°
- è¿½è¹¤æ™ºæ…§æ’ç¨‹å¸¶ä¾†çš„ç¢³æ¸›é‡

### ğŸ† éŠæˆ²åŒ–èˆ‡çå‹µæ©Ÿåˆ¶
- åŸºæ–¼æ¯æœˆç¢³æ¸›é‡çš„è¯ç›Ÿç³»çµ±
- å¾é’éŠ…æ™‰å‡è‡³é‘½çŸ³è¯ç›Ÿ
- è¿½è¹¤æ‚¨çš„ç’°å¢ƒå½±éŸ¿åŠ›

### ğŸ”” æ™ºæ…§é€šçŸ¥ç³»çµ±
- ä½ç¢³æ™‚æ®µçš„å®¢è£½åŒ–æé†’
- åŸºæ–¼ä½¿ç”¨ç¿’æ…£çš„å€‹äººåŒ–å»ºè­°
- åœ¨æ‚¨åå¥½çš„æ™‚é–“æ¥æ”¶æ¯æ—¥æé†’

### ğŸ‘¤ å½ˆæ€§èªè­‰æ–¹å¼
- åŒ¿åæ¨¡å¼å¿«é€Ÿé–‹å§‹
- å®‰å…¨çš„ Google ç™»å…¥ä»¥ä¿å­˜è³‡æ–™
- å¾åŒ¿åç„¡ç¸«å‡ç´šç‚ºè¨»å†Šå¸³æˆ¶

## ç³»çµ±æ¶æ§‹

Green Moment ç”Ÿæ…‹ç³»çµ±åŒ…å«ä¸‰å€‹ä¸»è¦å…ƒä»¶ï¼š

### 1. å¾Œç«¯ API (FastAPI)
- **ä½ç½®**ï¼š`/green_moment_backend_api`
- **æŠ€è¡“å †ç–Š**ï¼šPythonã€FastAPIã€PostgreSQLã€Redisã€Firebase
- **åŠŸèƒ½ç‰¹è‰²**ï¼š
  - æ”¯æ´éåŒæ­¥çš„ RESTful API
  - åŸºæ–¼ JWT çš„èº«ä»½é©—è­‰
  - å³æ™‚è³‡æ–™å¿«å–
  - æ¨æ’­é€šçŸ¥ç³»çµ±
  - è‡ªå‹•åŒ–æ’ç¨‹å™¨é€²è¡Œè³‡æ–™æ›´æ–°

### 2. è¡Œå‹•æ‡‰ç”¨ç¨‹å¼ (Flutter)
- **ä½ç½®**ï¼š`/green_moment_app`
- **æŠ€è¡“å †ç–Š**ï¼šFlutterã€Dartã€Firebase Messaging
- **å¹³å°**ï¼šAndroidï¼ˆiOS å°±ç·’ï¼‰
- **åŠŸèƒ½ç‰¹è‰²**ï¼š
  - Material Design ä½¿ç”¨è€…ä»‹é¢
  - å³æ™‚è³‡æ–™è¦–è¦ºåŒ–
  - é›¢ç·šåŠŸèƒ½
  - æ¨æ’­é€šçŸ¥

### 3. è³‡æ–™ç®¡ç·š
- **ä½ç½®**ï¼š`/green_moment_integrated`
- **æŠ€è¡“å †ç–Š**ï¼šPythonã€Pandas
- **åŠŸèƒ½ç‰¹è‰²**ï¼š
  - æ¯ 10 åˆ†é˜æ”¶é›†ç™¼é›»è³‡æ–™
  - æ•´åˆå¤©æ°£è³‡æ–™ä»¥æä¾›æ›´æº–ç¢ºé æ¸¬
  - å€åŸŸç¢³æ’æ”¾å¼·åº¦è¨ˆç®—

## å¿«é€Ÿé–‹å§‹

### ç³»çµ±éœ€æ±‚
- Python 3.11+
- PostgreSQL 15+
- Redis 7+
- Flutter 3.8+
- å·²å•Ÿç”¨ FCM çš„ Firebase å°ˆæ¡ˆ

### å¾Œç«¯è¨­å®š

1. **è¤‡è£½å°ˆæ¡ˆ**
```bash
git clone [repository-url]
cd green_moment_backend_api
```

2. **å»ºç«‹è™›æ“¬ç’°å¢ƒ**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows
```

3. **å®‰è£ç›¸ä¾å¥—ä»¶**
```bash
pip install -r requirements.txt
```

4. **è¨­å®šç’°å¢ƒè®Šæ•¸**
```bash
cp .env.example .env
# ç·¨è¼¯ .env æª”æ¡ˆï¼Œå¡«å…¥æ‚¨çš„è¨­å®š
```

5. **è¨­å®šè³‡æ–™åº«**
```bash
# å»ºç«‹è³‡æ–™åº«
createdb green_moment

# åŸ·è¡Œé·ç§»
alembic upgrade head
```

6. **å•Ÿå‹•æœå‹™**
```bash
# çµ‚ç«¯æ©Ÿ 1ï¼šAPI ä¼ºæœå™¨
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# çµ‚ç«¯æ©Ÿ 2ï¼šç¢³è³‡æ–™ç”¢ç”Ÿå™¨ï¼ˆåœ¨ X9 åˆ†åŸ·è¡Œï¼‰
python scripts/carbon_intensity_generator.py --scheduled

# çµ‚ç«¯æ©Ÿ 3ï¼šé€šçŸ¥æ’ç¨‹å™¨ï¼ˆåœ¨ X0 åˆ†åŸ·è¡Œï¼‰
python scripts/run_notification_scheduler.py
```

### Flutter æ‡‰ç”¨ç¨‹å¼è¨­å®š

1. **åˆ‡æ›è‡³æ‡‰ç”¨ç¨‹å¼ç›®éŒ„**
```bash
cd green_moment_app
```

2. **å®‰è£ç›¸ä¾å¥—ä»¶**
```bash
flutter pub get
```

3. **è¨­å®š Google ç™»å…¥**
- å°‡æ‚¨çš„ `google-services.json` åŠ å…¥ `android/app/`
- åœ¨ `android/app/src/main/res/values/strings.xml` æ›´æ–°æ‚¨çš„ Web Client ID

4. **åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼**
```bash
flutter run
```

## å°ˆæ¡ˆçµæ§‹

```
green_moment/
â”œâ”€â”€ green_moment_backend_api/      # å¾Œç«¯ API
â”‚   â”œâ”€â”€ app/                       # æ‡‰ç”¨ç¨‹å¼ç¨‹å¼ç¢¼
â”‚   â”‚   â”œâ”€â”€ api/                   # API ç«¯é»
â”‚   â”‚   â”œâ”€â”€ core/                  # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ models/                # è³‡æ–™åº«æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/               # Pydantic æ¶æ§‹
â”‚   â”‚   â””â”€â”€ services/              # å•†æ¥­é‚è¼¯
â”‚   â”œâ”€â”€ migrations/                # è³‡æ–™åº«é·ç§»
â”‚   â”œâ”€â”€ scripts/                   # å·¥å…·è…³æœ¬
â”‚   â””â”€â”€ tests/                     # æ¸¬è©¦å¥—ä»¶
â”‚
â”œâ”€â”€ green_moment_app/              # Flutter è¡Œå‹•æ‡‰ç”¨ç¨‹å¼
â”‚   â”œâ”€â”€ lib/                       # Dart åŸå§‹ç¢¼
â”‚   â”‚   â”œâ”€â”€ models/                # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ screens/               # UI ç•«é¢
â”‚   â”‚   â”œâ”€â”€ services/              # API æœå‹™
â”‚   â”‚   â””â”€â”€ widgets/               # å¯é‡ç”¨å…ƒä»¶
â”‚   â”œâ”€â”€ android/                   # Android è¨­å®š
â”‚   â””â”€â”€ assets/                    # åœ–ç‰‡å’Œè³‡æº
â”‚
â””â”€â”€ green_moment_integrated/       # è³‡æ–™ç®¡ç·š
    â”œâ”€â”€ stru_data/                 # è¼¸å‡º CSV æª”æ¡ˆ
    â”œâ”€â”€ logs/                      # æ—¥èªŒæª”æ¡ˆ
    â””â”€â”€ config/                    # è¨­å®šæª”
```

## API æ–‡ä»¶

å¾Œç«¯å•Ÿå‹•å¾Œï¼Œè«‹é€ è¨ªï¼š
- Swagger UIï¼šhttp://localhost:8000/api/v1/docs
- ReDocï¼šhttp://localhost:8000/api/v1/redoc

### ä¸»è¦ç«¯é»

- **èº«ä»½é©—è­‰**
  - `POST /api/v1/auth/google` - Google ç™»å…¥
  - `POST /api/v1/auth/anonymous` - åŒ¿åç™»å…¥
  
- **ç¢³è³‡æ–™**
  - `GET /api/v1/carbon/current` - ç›®å‰å¼·åº¦
  - `GET /api/v1/carbon/forecast` - 24 å°æ™‚é æ¸¬
  
- **ä½¿ç”¨è€…é€²åº¦**
  - `GET /api/v1/progress/summary` - ä½¿ç”¨è€…çµ±è¨ˆ
  - `POST /api/v1/chores/log` - è¨˜éŒ„å®¶é›»ä½¿ç”¨

## é–‹ç™¼æŒ‡å—

### åŸ·è¡Œæ¸¬è©¦
```bash
# å¾Œç«¯æ¸¬è©¦
cd green_moment_backend_api
pytest

# Flutter æ¸¬è©¦
cd green_moment_app
flutter test
```

### ç¨‹å¼ç¢¼é¢¨æ ¼
```bash
# Python æ ¼å¼åŒ–
black app/
flake8 app/

# Dart æ ¼å¼åŒ–
flutter analyze
flutter format lib/
```

## éƒ¨ç½²æŒ‡å—

### ç”Ÿç”¢ç’°å¢ƒæª¢æŸ¥æ¸…å–®

1. **å®‰å…¨æ€§**
   - [ ] æ›´æ”¹é è¨­è³‡æ–™åº«å¯†ç¢¼
   - [ ] ç”¢ç”Ÿå®‰å…¨çš„ JWT å¯†é‘°
   - [ ] è¨­å®š HTTPS/SSL
   - [ ] è¨­å®š API é€Ÿç‡é™åˆ¶

2. **è¨­å®š**
   - [ ] æ›´æ–° Flutter æ‡‰ç”¨ç¨‹å¼ä¸­çš„ç”Ÿç”¢ç’°å¢ƒ URL
   - [ ] ç‚ºç”Ÿç”¢ç’°å¢ƒè¨­å®š Firebase
   - [ ] è¨­å®šç¶²åŸŸå’Œ SSL æ†‘è­‰
   - [ ] è¨­å®šé›²ç«¯å„²å­˜ç©ºé–“

3. **åŸºç¤è¨­æ–½**
   - [ ] è¨­å®šé›²ç«¯è³‡æ–™åº«ï¼ˆCloud SQL/RDSï¼‰
   - [ ] è¨­å®š Redis å¿«å–
   - [ ] è¨­å®šç›£æ§å’Œæ—¥èªŒè¨˜éŒ„
   - [ ] è¨­å®šè‡ªå‹•æ“´å±•

### éƒ¨ç½²é¸é …

**é¸é … 1ï¼šGoogle Cloud Platform**
```yaml
æœå‹™ï¼š
- Cloud Runï¼šAPI å’Œæ’ç¨‹å™¨
- Cloud SQLï¼šPostgreSQL
- Memorystoreï¼šRedis
- Cloud Storageï¼šè³‡æ–™æª”æ¡ˆ
- Cloud Schedulerï¼šCron ä½œæ¥­
```

**é¸é … 2ï¼šç¶“æ¿Ÿå¯¦æƒ æ–¹æ¡ˆ**
```yaml
æœå‹™ï¼š
- Render.comï¼šå…è²» API å±¤ç´š
- Supabaseï¼šå…è²» PostgreSQL
- Redis Labsï¼šå…è²»å±¤ç´š
- GitHub Actionsï¼šCI/CD
```

## è²¢ç»æŒ‡å—

æˆ‘å€‘æ­¡è¿è²¢ç»ï¼è©³æƒ…è«‹åƒé–±æˆ‘å€‘çš„[è²¢ç»æŒ‡å—](CONTRIBUTING.md)ã€‚

### é–‹ç™¼å·¥ä½œæµç¨‹
1. Fork å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯
3. é€²è¡Œæ‚¨çš„ä¿®æ”¹
4. æ–°å¢æ¸¬è©¦
5. æäº¤ Pull Request

## æ”¯æ´

- **æ–‡ä»¶**ï¼š[Wiki](wiki-url)
- **å•é¡Œå›å ±**ï¼š[GitHub Issues](issues-url)
- **é›»å­éƒµä»¶**ï¼šsupport@greenmoment.tw

## æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Š - è©³æƒ…è«‹åƒé–± [LICENSE](LICENSE) æª”æ¡ˆã€‚

## è‡´è¬

- å°ç£é›»åŠ›å…¬å¸æä¾›å³æ™‚è³‡æ–™
- ä¸­å¤®æ°£è±¡ç½²æä¾›å¤©æ°£è³‡æ–™
- æ‰€æœ‰æ¸¬è©¦äººå“¡å’Œè²¢ç»è€…

---

**Green Moment** - è®“æ¯ä¸€åº¦é›»éƒ½ç‚ºæ°¸çºŒæœªä¾†ç›¡ä¸€ä»½åŠ› ğŸŒ±